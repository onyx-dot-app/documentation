---
title: "Onyx Slack Bot"
description: "How to set up a Slack bot connected to Onyx"
icon: "slack"
---

import HowToUseOnyxBot from "/snippets/how-to-use-onyxbot.mdx";

## Overview

Onyx can connect to your Slack workspace and answer questions like an expert teammate.

You can configure OnyxBot to respond to certain types of messages, in specific channels,
and with selected data from your index.

<img className="rounded-image" src="/assets/admin/slackbot/slackbot_response.png" alt="Onyx Slack Bot" />

## Setup

<Note>
  You must be an admin of the Slack workspace to set up the Slack bot.
</Note>

<Steps>
  <Step title="Create a new Slack App">
    Navigate to the [Slack App Dashboard](https://api.slack.com/apps)
    and click **Create New App** → **From a manifest**.

    Select the workspace you want to connect to Onyx.
  </Step>

  <Step title="Use the YAML manifest">
    Click the **YAML** tab and paste the following manifest into the box:

    ```yaml YAML Manifest expandable
    display_information:
      name: OnyxBot
      description: I help answer questions in Slack!
    features:
      app_home:
        home_tab_enabled: false
        messages_tab_enabled: true
        messages_tab_read_only_enabled: false
      bot_user:
        display_name: OnyxBot
        always_online: true
      slash_commands:
        - command: /onyx
          description: Get back a private answer!
          usage_hint: Put your question here!
          should_escape: false
    oauth_config:
      scopes:
        bot:
          - app_mentions:read
          - channels:history
          - channels:join
          - channels:read
          - chat:write
          - commands
          - groups:history
          - groups:read
          - im:history
          - im:read
          - mpim:history
          - reactions:write
          - reactions:read
          - usergroups:read
          - users:read.email
          - users:read
    settings:
      event_subscriptions:
        bot_events:
          - app_mention
          - message.channels
          - message.groups
          - message.im
          - message.mpim
      interactivity:
        is_enabled: true
      org_deploy_enabled: false
      socket_mode_enabled: true
      token_rotation_enabled: false
    ```

    Click **Create** and you will be taken to the app page.
  </Step>

  <Step title="Generate an App Token">
    Scroll down to the **App-Level Tokens** section and click **Generate Token and Scopes**.

    Give your token a name, add the `connections:write` scope to the app-level token and click **Generate**.
    Save this token for later.

    <Tip>
      You can customize your Slack bot's name, description, and icon in the **Display Information** section.
    </Tip>

    <img className="rounded-image" src="/assets/admin/slackbot/slackbot_app_token.png" alt="Onyx Slack Bot App Token" />
  </Step>

  <Step title="Install the Slack App">
    Navigate to the **OAuth & Permissions** tab, click **Install to Workspace**,
    and follow the instructions to install the app.

    Copy the **Bot User OAuth Token** and save it for later.

    <Note>
      Onyx does not currently support token rotation.
    </Note>

    <img className="rounded-image" src="/assets/admin/slackbot/slackbot_bot_token.png" alt="Onyx Slack Bot Bot Token" />
  </Step>

  <Step title="Setup Onyx for the Slack Bot">
    Navigate to the Onyx Admin Panel and select the **Slack Bots** tab.

    Enter the **Bot Token**, **App Token**, and click **Create!**

    <img className="rounded-image" src="/assets/admin/slackbot/slackbot_onyx_setup.png" alt="Onyx Slack Bot Onyx Setup" />
  </Step>

  <Step title="Configure the Slack Bot's Behavior">
    Once your Slack bot is created, you can configure it's universal behavior through the **Default Configuration**.

    You can also set channel-specific behavior using **Channel Configurations**.

    <img className="rounded-image" src="/assets/admin/slackbot/slackbot_config.png" alt="Onyx Slack Bot Configuration" />
  </Step>
</Steps>

<HowToUseOnyxBot />

## Advanced Configuration

There are a set of advanced configuration options available via environment variables that control your Slack bot's
behavior.

You can find the full list of configuration options [in the Onyx
GitHub](https://github.com/onyx-dot-app/onyx/blob/main/backend/onyx/configs/onyxbot_configs.py).

<Warning>
  These configuration options are rarely needed and should be used with caution.
</Warning>

<AccordionGroup>
  <Accordion title="DANSWER_BOT_NUM_RETRIES">
    Number of retry attempts for generating an answer before failing.

    Default: `5 (int)`
  </Accordion>

  <Accordion title="MAX_THREAD_CONTEXT_PERCENTAGE">
    How much of the available input context can be used for thread context.

    Current value: `512 * 2 / 3072 ≈ 0.333 (float)`
  </Accordion>

  <Accordion title="DANSWER_BOT_NUM_DOCS_TO_DISPLAY">
    Number of documents shown under "Reference Documents".

    Default: `5 (int)`
  </Accordion>

  <Accordion title="DANSWER_BOT_DISABLE_DOCS_ONLY_ANSWER">
    Disable responses that only show "Reference Documents" when the LLM cannot answer.

    Default: `false (bool)`
  </Accordion>

  <Accordion title="DANSWER_REACT_EMOJI">
    Emoji reaction shown while Onyx considers a message.

    Default: `eyes (str)`
  </Accordion>

  <Accordion title="DANSWER_FOLLOWUP_EMOJI">
    Emoji used to suggest that the user may need more help.

    Default: `sos (str)`
  </Accordion>

  <Accordion title="DANSWER_BOT_FEEDBACK_VISIBILITY">
    Visibility for AI answer feedback submitted to OnyxBot. Options: `private` (only the clicking user),
    `anonymous` (public but anonymous), `public` (public with username).

    Default: `private (str)`
  </Accordion>

  <Accordion title="NOTIFY_SLACKBOT_NO_ANSWER">
    If enabled, OnyxBot sends a brief apology message when it cannot find an answer, so users aren’t left wondering.

    Default: `false (bool)`
  </Accordion>

  <Accordion title="DANSWER_BOT_DISPLAY_ERROR_MSGS">
    Show brief error explanations when something goes wrong answering a question (useful for debugging).

    Default: `false (bool)`
  </Accordion>

  <Accordion title="DANSWER_BOT_RESPOND_EVERY_CHANNEL">
    Respond in all channels by default, instead of only those configured in the UI.

    Default: `false (bool)`
  </Accordion>

  <Accordion title="DANSWER_BOT_MAX_QPM">
    Maximum questions per minute the bot can answer. Set to `0` or leave unset for uncapped.

    Default: `uncapped (int)`
  </Accordion>

  <Accordion title="DANSWER_BOT_MAX_WAIT_TIME">
    Maximum time in seconds a question will wait in the queue before timing out.

    Default: `180 (seconds; 3 minutes)`
  </Accordion>

  <Accordion title="DANSWER_BOT_FEEDBACK_REMINDER">
    Minutes after which a reminder DM is sent to request feedback on an answer. Set to `0` to disable.

    Default: `0 (disabled; 0 minutes)`
  </Accordion>

  <Accordion title="DANSWER_BOT_REPHRASE_MESSAGE">
    Rephrase Slack user messages before sending to the LLM (may improve clarity for the model).

    Default: `false (bool)`
  </Accordion>

  <Accordion title="DANSWER_BOT_RESPONSE_LIMIT_PER_TIME_PERIOD">
    Number of responses OnyxBot can send within a time window. Set to `0` to disable the limit.

    Default: `5000 (int)`
  </Accordion>

  <Accordion title="DANSWER_BOT_RESPONSE_LIMIT_TIME_PERIOD_SECONDS">
    Length of the response limit window in seconds.

    Default: `86400 (seconds; 24 hours)`
  </Accordion>
</AccordionGroup>
