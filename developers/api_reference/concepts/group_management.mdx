---
title: "Group Management"
description: "Understanding how groups work and control access to resources in Onyx"
---

# Overview: How Groups Work and Grant Access

The Group Management API enables you to organize users into groups and control access to resources like agents, connectors, and document sets. Groups provide a flexible way to implement team-based permissions and resource sharing in Onyx.

## Key Concepts

- **Groups**: Collections of users with shared resource access
- **Group Members**: Users who belong to a group and inherit its permissions
- **Resource Assignment**: Agents, connectors, and document sets can be assigned to groups
- **Inherited Access**: Users automatically gain access to group resources
- **Hierarchical Permissions**: Groups can have different permission levels for different resources

## How Group Access Works

1. **Create Groups**: Define groups based on teams, departments, or projects
2. **Add Users**: Assign users to appropriate groups
3. **Assign Resources**: Add agents, connectors, or document sets to groups
4. **Automatic Access**: Users in the group can now access assigned resources
5. **Dynamic Updates**: Adding/removing users or resources updates access immediately

## Core Group Management Operations

While adding **Agents to groups** and **Connectors to groups** is fully supported by the Onyx platform, the specific API endpoints and parameters for these operations can vary based on resource types and access patterns. 

For detailed information about:
- **Agent-to-Group assignments**
- **Connector-to-Group assignments** 
- **Document Set permissions**
- **Advanced group configurations**

Please refer to the [Swagger documentation](https://cloud.onyx.app/docs) or explore the codebase directly, as these operations involve resource-specific parameters and business logic.

## Common Use Cases

### Team-Based Access Control
```python
# Sales team gets access to sales-specific resources
sales_group = create_group({
    "name": "Sales Team",
    "description": "Access to sales tools and customer data"
})

# Add sales team members
add_users_to_group(sales_group.id, [
    "john@company.com",
    "sarah@company.com", 
    "mike@company.com"
])

# Assign sales-specific agents and connectors
# (Refer to Swagger docs for specific endpoints)
```

### Department-Based Organization
```python
# Engineering department with development tools access
engineering_group = create_group({
    "name": "Engineering",
    "description": "Access to development documentation and tools"
})

# Marketing department with content and campaign tools
marketing_group = create_group({
    "name": "Marketing", 
    "description": "Access to marketing content and campaign tools"
})
```

### Project-Based Access
```python
# Temporary project group for cross-functional team
project_alpha_group = create_group({
    "name": "Project Alpha Team",
    "description": "Cross-functional team for Project Alpha",
    "is_temporary": True
})
```

## Group Structure and Properties

### Basic Group Information
```json
{
  "id": 123,
  "name": "Sales Team",
  "description": "Sales team with access to CRM and customer data",
  "is_public": false,
  "is_up_for_deletion": false,
  "user_count": 5,
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T15:45:00Z"
}
```

### Group Membership
```json
{
  "group_id": 123,
  "users": [
    {
      "id": "user_456",
      "email": "john@company.com",
      "full_name": "John Smith",
      "role": "user",
      "added_at": "2024-01-15T10:30:00Z"
    },
    {
      "id": "user_789", 
      "email": "sarah@company.com",
      "full_name": "Sarah Johnson",
      "role": "user",
      "added_at": "2024-01-15T11:00:00Z"
    }
  ]
}
```

## Access Control Scenarios

### Scenario 1: Sales Team Setup
```python
# 1. Create sales group
sales_group = create_group({
    "name": "Sales Team",
    "description": "Sales representatives and managers"
})

# 2. Add sales team members
sales_users = [
    "sales-rep1@company.com",
    "sales-rep2@company.com", 
    "sales-manager@company.com"
]
add_users_to_group(sales_group.id, sales_users)

# 3. Assign sales-specific resources
# - Sales CRM connector (for customer data access)
# - Sales copilot agent (for sales assistance)
# - Customer documents (for account information)
# (See Swagger docs for specific assignment endpoints)
```

### Scenario 2: Support Team Setup
```python
# 1. Create support group
support_group = create_group({
    "name": "Customer Support",
    "description": "Customer support representatives"
})

# 2. Add support team members
support_users = [
    "support1@company.com",
    "support2@company.com",
    "support-lead@company.com"
]
add_users_to_group(support_group.id, support_users)

# 3. Assign support-specific resources
# - Knowledge base connectors (for FAQ and docs)
# - Support agent (for customer assistance)
# - Ticket creation tools (for issue tracking)
```

### Scenario 3: Executive Access
```python
# 1. Create executive group
exec_group = create_group({
    "name": "Executive Team",
    "description": "C-level executives and VPs"
})

# 2. Add executives
executives = [
    "ceo@company.com",
    "cto@company.com",
    "vp-sales@company.com"
]
add_users_to_group(exec_group.id, executives)

# 3. Assign broad access resources
# - All company agents (for comprehensive assistance)
# - All document sources (for complete visibility)
# - Analytics and reporting tools (for insights)
```

## Best Practices

### Group Design Principles
- **Purpose-Driven**: Create groups based on clear business needs
- **Minimal Access**: Grant only necessary permissions to each group
- **Regular Review**: Periodically audit group membership and permissions
- **Clear Naming**: Use descriptive names that indicate group purpose

### Security Considerations
- **Principle of Least Privilege**: Users should have minimum necessary access
- **Separation of Duties**: Sensitive operations should require multiple groups
- **Audit Trails**: Track group changes and access patterns
- **Regular Cleanup**: Remove inactive users and unused groups

### Organizational Patterns
```python
# Department-based groups
departments = ["Engineering", "Sales", "Marketing", "Support", "HR"]

# Role-based groups
roles = ["Managers", "Individual Contributors", "Executives", "Admins"]

# Project-based groups (temporary)
projects = ["Project Alpha", "Q1 Initiative", "Product Launch"]

# Hybrid approach (department + role)
hybrid_groups = [
    "Engineering Managers",
    "Sales Reps", 
    "Marketing Leads",
    "Support Agents"
]
```

## Monitoring and Analytics

### Group Usage Tracking
```python
# Track group resource usage
group_analytics = get_group_analytics(group_id)
print(f"Active users: {group_analytics['active_users']}")
print(f"Resource usage: {group_analytics['resource_usage']}")
print(f"Access patterns: {group_analytics['access_patterns']}")
```

### Access Auditing
```python
# Audit group access and changes
audit_log = get_group_audit_log(group_id, days=30)
for event in audit_log:
    print(f"{event['timestamp']}: {event['action']} by {event['user']}")
    print(f"  Resource: {event['resource']}")
    print(f"  Details: {event['details']}")
```

## Integration Patterns

### LDAP/Active Directory Sync
```python
# Sync groups from LDAP/AD
ldap_sync_config = {
    "ldap_server": "ldap://company.local",
    "group_base_dn": "ou=Groups,dc=company,dc=local",
    "user_base_dn": "ou=Users,dc=company,dc=local",
    "sync_frequency": "daily"
}

# Groups will be automatically created and maintained
setup_ldap_group_sync(ldap_sync_config)
```

### SAML/OIDC Group Mapping
```python
# Map SAML/OIDC groups to Onyx groups
group_mappings = {
    "saml_sales_team": "Sales Team",
    "saml_engineering": "Engineering",
    "saml_executives": "Executive Team"
}

# Users will be automatically added to groups based on SAML assertions
configure_saml_group_mapping(group_mappings)
```

## Advanced Group Features

### Nested Groups
While not directly supported in the current API, nested group access can be achieved through multiple group assignments:

```python
# User can be in multiple groups
user_groups = [
    "Engineering",           # Department group
    "Senior Engineers",      # Role group  
    "Project Alpha Team"     # Project group
]

# User inherits permissions from all groups
for group in user_groups:
    add_user_to_group(user_id, group)
```

### Conditional Access
```python
# Time-based access (implementation depends on business logic)
temp_group = create_group({
    "name": "Q1 Campaign Team",
    "description": "Temporary access for Q1 marketing campaign",
    "expires_at": "2024-03-31T23:59:59Z"
})
```

## Response Formats

### Group List Response
```json
{
  "groups": [
    {
      "id": 123,
      "name": "Sales Team", 
      "description": "Sales representatives and managers",
      "user_count": 5,
      "is_public": false,
      "created_at": "2024-01-15T10:30:00Z"
    },
    {
      "id": 124,
      "name": "Engineering",
      "description": "Software engineering team", 
      "user_count": 12,
      "is_public": false,
      "created_at": "2024-01-10T09:00:00Z"
    }
  ],
  "total_count": 2,
  "page": 1,
  "page_size": 20
}
```

### Group Membership Response
```json
{
  "group_id": 123,
  "group_name": "Sales Team",
  "members": [
    {
      "user_id": "user_456",
      "email": "john@company.com",
      "full_name": "John Smith",
      "role": "user",
      "joined_at": "2024-01-15T10:30:00Z"
    }
  ],
  "member_count": 1
}
```

## Error Handling

### Common Group Management Errors
```json
// User already in group
{
  "error": {
    "code": "USER_ALREADY_IN_GROUP",
    "message": "User john@company.com is already a member of Sales Team",
    "details": {
      "user_id": "user_456",
      "group_id": 123
    }
  }
}

// Group not found
{
  "error": {
    "code": "GROUP_NOT_FOUND", 
    "message": "Group with ID 999 does not exist",
    "details": {
      "group_id": 999
    }
  }
}

// Insufficient permissions
{
  "error": {
    "code": "INSUFFICIENT_PERMISSIONS",
    "message": "You do not have permission to modify this group",
    "details": {
      "required_permission": "group_admin",
      "group_id": 123
    }
  }
}
```

## Next Steps

Explore the auto-generated Group Management API endpoints below for:

- **List Groups**: View all groups and their basic information
- **Get Group by ID**: Retrieve detailed group information
- **Create Group**: Create new groups for organizing users
- **Update Group**: Modify group settings and properties
- **Add User to Group**: Assign users to groups
- **Delete User from Group**: Remove users from groups  
- **Delete Group**: Remove groups entirely

For **advanced group operations** including:
- Adding Agents to groups
- Adding Connectors to groups
- Document Set permissions
- Custom resource assignments

Please refer to the [Swagger documentation](https://cloud.onyx.app/docs) or explore the codebase directly for the most up-to-date endpoint specifications and parameters.

For related functionality, see:
- [User Management API](/api_reference/user_management/list_users) - Manage individual user accounts
- [Agents API](/api_reference/agents/overview) - Create agents that can be assigned to groups
- [Files & Connectors API](/api_reference/files_connectors/overview) - Manage connectors that can be assigned to groups

---

<Note>
**Note**: Group Management provides the foundation for scalable access control in Onyx. While core group operations are documented below, advanced resource assignments (agents, connectors, document sets) involve resource-specific parameters best explored through the [Swagger documentation](https://cloud.onyx.app/docs) or codebase.
</Note> 