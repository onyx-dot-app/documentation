---
title: GCP Vertex AI
description: "Configure Onyx to use GCP Vertex AI"
---

There are currently two supported approaches to use Vertex AI with Onyx:

1. [Use the gcloud CLI to authenticate](#use-the-gcloud-cli-to-authenticate)
2. [Set up a service account, and use the service account to authenticate](#use-a-service-account-to-authenticate)

## Use the gcloud CLI to authenticate

1. Install the [gcloud CLI](https://cloud.google.com/sdk/docs/install)
2. Authenticate with the gcloud CLI using `gcloud auth application-default login` on the machine that Onyx is running on.
3. Set up a `Custom LLM Provider` in the Admin Panel. See the screenshots below
   for an example of what this should look like. Replace `YOUR_GCP_PROJECT_ID`
   with your actual GCP project ID.

<div className="flex gap-2">
  <div>![VertexAILLMProvider](/assets/images/gen_ai/vertex_ai/cli-1.png)</div>
  <div>![VertexAILLMProvider](/assets/images/gen_ai/vertex_ai/cli-2.png)</div>
  <div>![VertexAILLMProvider](/assets/images/gen_ai/vertex_ai/cli-3.png)</div>
</div>

4. Start using Vertex AI with Onyx!

## Use a service account to authenticate

1. Go the [Service Accounts](https://console.cloud.google.com/iam-admin/serviceaccounts) page in the GCP Console.
2. Click `+ Create Service Account` and set one up with a name like `onyx-vertex-ai`. Give it access to the `Vertex AI Administrator` role. Create!

![VertexAILLMProvider](/assets/images/gen_ai/vertex_ai/service-acc-1.png)

3. Click into the created service account, navigate to the `Keys` tab, then click `Add Key`. Select `JSON` as the key type, and click `Create`. This will download a JSON file to your machine.

![VertexAILLMProvider](/assets/images/gen_ai/vertex_ai/service-acc-2.png)

4. Back in the Onyx Admin Panel, click on the "Set up" button next to the "GCP Vertex AI" section.
    Drag and drop your JSON credentials file into the file box, or click it to select it from your file explorer.

<div>![VertexAILLMProvider](/assets/images/gen_ai/vertex_ai/onyx-service-acc-1.png)</div>

5. Next, choose your GCP Vertex AI model's location. This is not a required step, so feel free to skip.
    The valid options are one of:
- us-central1
- us-east1
- us-east4
- us-east5
- us-south1
- us-west1
- us-west2
- us-west3
- us-west4
- northamerica-northeast1
- northamerica-northeast2
- southamerica-east1
- europe-central2
- europe-north1
- europe-southwest1
- europe-west1
- europe-west2
- europe-west3
- europe-west4
- europe-west6
- europe-west8
- europe-west9
- asia-east1
- asia-east2
- asia-northeast1
- asia-northeast2
- asia-northeast3
- asia-south1
- asia-south2
- asia-southeast1
- asia-southeast2
- australia-southeast1
- australia-southeast2
- me-west1
- africa-south1 

<div>![VertexAILLMProvider](/assets/images/gen_ai/vertex_ai/onyx-service-acc-2.png)</div>

6. Start using Vertex AI with Onyx!
